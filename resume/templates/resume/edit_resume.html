{% extends "main.html" %}
{% load resume_tags %}

{% block content %}

<!-- Resume Section-->
<form class="pt-8 lg:px-32 mx-auto px-16 xl:px-64" method="POST">
    {% csrf_token %}
    <div class="text-center my-8">
        <span class="px-4 text-blue-700 font-medium text-2xl">Edit Resume</span>
    </div>
    {{ form.as_p }}
    <div class="flex justify-center my-4">
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Update</button>
    </div>
</form>

<div class="pt-8 lg:px-32 xl:px-64 mx-auto px-6 text-blue-300">
    <div class="text-center">
        <span class="text-blue-200 italic">Drag items to reorder them</span>
    </div>

    <!-- Experiences Section -->
    <div class="section-container">
        <div class="flex items-center my-8">
            <hr class="flex-grow border-t border-blue-300">
            <span class="px-4 text-blue-500 font-medium text-2xl">Experiences</span>
            <hr class="flex-grow border-t border-blue-300">
        </div>

        <div class="container mx-auto" id="experiences-list">
            <div class="mx-auto mb-4">
                <div class="text-center">
                    {% include "resume/partials/section_dropdown.html" with form=experience_add_form button_icon="+" action_url="experience"|get_add_url button_label="Add Experience" %}
                </div>
            </div>

            {% for experience in experiences %}
            <div class="container max-w-2xl mx-auto my-4 p-2 bg-gradient-to-b from-slate-700 to-transparent rounded-xl">
                <div class="grid grid-cols-12 gap-2">
                    <div class="col-span-10">
                        <p>Title: {{ experience.job_title }}</p>
                        <p>Company: {{ experience.company_name }}</p>
                        <p>Start Date: {{ experience.start_date }}</p>
                        <p>End Date: {{ experience.end_date }}</p>
                        <p>Description: {{ experience.description }}</p>
                        <p>Currently Employed: {{ experience.is_current }}</p>
                    </div>
                    <div class="col-span-2 my-auto mx-auto flex flex-col gap-2">
                        <button onclick="location.href='{% url 'delete-experience' experience.id %}?next={{ request.get_full_path }}'" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                            Delete
                        </button>
                        <button onclick="location.href='{% url 'edit-experience' experience.id %}?next={{ request.get_full_path }}'" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2">
                            Edit
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}

            <div class="text-center mt-8">
                <a class="bg-blue-500 hover:bg-blue-700 text-white font-bold px-8 py-3 rounded text-2xl" href="{% url 'list-experiences' resume.id %}?next={{ request.path }}">
                    Manage Experiences
                </a>
            </div>
        </div>
    </div>

    <!-- Education Section -->
    <div class="section-container">
        <div class="flex items-center my-8">
            <hr class="flex-grow border-t border-blue-300">
            <span class="px-4 text-blue-500 font-medium text-2xl">Education</span>
            <hr class="flex-grow border-t border-blue-300">
        </div>

        <div class="container mx-auto" id="educations-list">
            <div class="mx-auto mb-4">
                <div class="text-center">
                    {% include "resume/partials/section_dropdown.html" with form=education_add_form button_icon="+" action_url="education"|get_add_url button_label="Add Education" %}
                </div>
            </div>

            {% for education in educations %}
            <div class="container max-w-2xl mx-auto my-4 p-2 bg-gradient-to-b from-slate-700 to-transparent rounded-xl">
                <div class="grid grid-cols-12 gap-2">
                    <div class="col-span-10">
                        <p>Degree: {{ education.degree }}</p>
                        <p>Institution: {{ education.institution_name }}</p>
                        <p>Field of Study: {{ education.field_of_study }}</p>
                        <p>Start Date: {{ education.start_date }}</p>
                        <p>End Date: {{ education.end_date }}</p>
                        <p>Description: {{ education.description }}</p>
                    </div>
                    <div class="col-span-2 my-auto mx-auto flex flex-col gap-2">
                        <button onclick="location.href='{% url 'delete-education' education.id %}?next={{ request.get_full_path }}'" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                            Delete
                        </button>
                        <button onclick="location.href='{% url 'edit-education' education.id %}?next={{ request.get_full_path }}'" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2">
                            Edit
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Skills Section -->
    <div class="section-container">
        <div class="flex items-center my-8">
            <hr class="flex-grow border-t border-blue-300">
            <span class="px-4 text-blue-500 font-medium text-2xl">Skills</span>
            <hr class="flex-grow border-t border-blue-300">
        </div>

        <div class="container mx-auto" id="skills-list">
            <div class="mx-auto mb-4">
                <div class="text-center">
                    {% include "resume/partials/section_dropdown.html" with form=skill_add_form button_icon="+" action_url="skill"|get_add_url:resume.id button_label="Add Skill" %}
                </div>
            </div>

            {% for skill in skills %}
            <div class="container max-w-2xl mx-auto my-4 p-2 bg-gradient-to-b from-slate-700 to-transparent rounded-xl">
                <div class="grid grid-cols-12 gap-2">
                    <div class="col-span-10">
                        <p>{{ skill.name }}</p>
                        <p>{{ skill.proficiency }}</p>
                    </div>
                    <div class="col-span-2 my-auto mx-auto flex flex-col gap-2">
                        <button onclick="location.href='{% url 'delete-skill' skill.id %}?next={{ request.path }}'" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                            Delete
                        </button>
                        <button onclick="location.href='{% url 'edit-skill' skill.id %}?next={{ request.get_full_path }}'" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2">
                            Edit
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Projects Section -->
    <div class="section-container">
        <div class="flex items-center my-8">
            <hr class="flex-grow border-t border-blue-300">
            <span class="px-4 text-blue-500 font-medium text-2xl">Projects</span>
            <hr class="flex-grow border-t border-blue-300">
        </div>

        <div class="container mx-auto" id="projects-list">
            <div class="mx-auto mb-4">
                <div class="text-center">
                    {% include "resume/partials/section_dropdown.html" with form=project_add_form button_icon="+" action_url="project"|get_add_url button_label="Add Project" %}
                </div>
            </div>

            {% for project in projects %}
            <div class="container max-w-2xl mx-auto my-4 p-2 bg-gradient-to-b from-slate-700 to-transparent rounded-xl">
                <div class="grid grid-cols-12 gap-2">
                    <div class="col-span-10">
                        <p>{{ project.title }}</p>
                        <p>{{ project.description }}</p>
                        <p>{{ project.link }}</p>
                    </div>
                    <div class="col-span-2 my-auto mx-auto flex flex-col gap-2">
                        <button onclick="location.href='{% url 'delete-project' project.id %}?next={{ request.path }}'" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                            Delete
                        </button>
                        <button onclick="location.href='{% url 'edit-project' project.id %}?next={{ request.get_full_path }}'" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2">
                            Edit
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Certifications Section -->
    <div class="section-container">
        <div class="flex items-center my-8">
            <hr class="flex-grow border-t border-blue-300">
            <span class="px-4 text-blue-500 font-medium text-2xl">Certifications</span>
            <hr class="flex-grow border-t border-blue-300">
        </div>

        <div class="container mx-auto" id="certifications-list">
            <div class="mx-auto mb-4">
                <div class="text-center">
                    {% include "resume/partials/section_dropdown.html" with form=certification_add_form button_icon="+" action_url="certification"|get_add_url button_label="Add Certificate" %}
                </div>
            </div>

            {% for certification in certifications %}
            <div class="container max-w-2xl mx-auto my-4 p-2 bg-gradient-to-b from-slate-700 to-transparent rounded-xl">
                <div class="grid grid-cols-12 gap-2">
                    <div class="col-span-10">
                        <p>{{ certification.name }}</p>
                        <p>{{ certification.issuer }}</p>
                        <p>{{ certification.issue_date }}</p>
                        <p>{{ certification.expiration_date }}</p>
                        <p>{{ certification.credential_id }}</p>
                        <p>{{ certification.credential_url }}</p>
                    </div>
                    <div class="col-span-2 my-auto mx-auto flex flex-col gap-2">
                        <button onclick="location.href='{% url 'delete-certification' certification.id %}?next={{ request.path }}'" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                            Delete
                        </button>
                        <button onclick="location.href='{% url 'edit-certification' certification.id %}?next={{ request.get_full_path }}'" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2">
                            Edit
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% include "resume/sortable_script.html" %}
{% include "resume/collapse_script.html" %}

{% endblock content %}
